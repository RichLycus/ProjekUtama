{
  "flow_id": "pro_rag_full_v1",
  "name": "Pro Mode - Full Pipeline",
  "description": "Full 5-agent pipeline: Router → RAG → Execution → LLM → Persona",
  "version": "1.0.0",
  
  "metadata": {
    "author": "ChimeraAI",
    "created_at": "2025-10-25",
    "updated_at": "2025-10-25",
    "tags": ["pro", "rag", "comprehensive", "5-agent"]
  },
  
  "profile": {
    "target_device": "local",
    "hardware_mode": "gpu_4060",
    "max_memory_gb": 8,
    "concurrency_limit": 2,
    "precision": "fp16",
    "offload_kv_cache": true
  },
  
  "signature": {
    "hash": "sha256:pro_rag_full_v1_simple",
    "last_verified": "2025-10-25T10:00:00Z",
    "auto_update": true
  },
  
  "config": {
    "max_execution_time": 30,
    "enable_cache": false,
    "fallback_on_error": true
  },
  
  "steps": [
    {
      "id": "step_1_preprocess",
      "agent": "preprocessor",
      "description": "Preprocess input",
      "config": {
        "normalize_whitespace": true,
        "max_length": 5000
      },
      "condition": null,
      "timeout": 2,
      "critical": true
    },
    {
      "id": "step_2_router",
      "agent": "router",
      "description": "Classify intent",
      "config": {},
      "condition": null,
      "timeout": 5,
      "critical": false
    },
    {
      "id": "step_3_rag",
      "agent": "rag",
      "description": "Retrieve relevant context",
      "config": {},
      "condition": null,
      "timeout": 5,
      "critical": false
    },
    {
      "id": "step_4_execution",
      "agent": "execution",
      "description": "Check tool execution",
      "config": {},
      "condition": null,
      "timeout": 2,
      "critical": false
    },
    {
      "id": "step_5_llm_reasoning",
      "agent": "llm_agent",
      "description": "Generate comprehensive response",
      "config": {
        "model": "gemma2:2b",
        "temperature": 0.6,
        "max_tokens": 2000
      },
      "condition": null,
      "timeout": 15,
      "critical": true
    },
    {
      "id": "step_6_persona",
      "agent": "persona",
      "description": "Apply full persona (stays alive with LLM!)",
      "config": {
        "persona": "lycus",
        "format": "text",
        "include_metadata": false
      },
      "condition": null,
      "timeout": 5,
      "critical": false
    }
  ],
  
  "error_handling": {
    "retry_on_timeout": false,
    "max_retries": 1,
    "retry_delay": 1,
    "fallback_flows": ["flash_base_v1"],
    "log_level": "info",
    "on_fail": null
  },
  
  "optimization": {
    "enable_parallel": false,
    "priority": "quality",
    "adaptive_timeout": true,
    "resource_aware": true
  }
}
