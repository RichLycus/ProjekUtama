kend dari scan
      allow: ['.', 'src', 'public', 'node_modules']
    }
  },
  optimizeDeps: {
    exclude: ['electron']  // Skip electron di web mode
  }
}
```

**Why exclude backend?**
- Backend folder punya HTML files dengan TypeScript type assertions
- Vite will error jika scan file-file ini
- Example error: `Expected ")" but found "as"` in HTML script tags

### **üîß Environment Variables**

**File**: `.env` (root level)
```bash
VITE_API_URL=http://localhost:8001
VITE_BACKEND_URL=http://localhost:8001
```

**Usage in code:**
```typescript
const BACKEND_URL = import.meta.env.VITE_BACKEND_URL
```

### **üìù Startup Script Structure**

**File**: `start_web.sh`

**What it does:**
1. Kill existing vite processes
2. Start Vite dengan vite.config.web.ts
3. Check frontend health
4. Check/start backend via supervisor
5. Display status & URLs

**Usage:**
```bash
chmod +x start_web.sh
./start_web.sh
```

### **üêõ Common Issues & Solutions**

**Issue 1: "vite: not found"**
```bash
# Solution: Install dependencies
cd /app && yarn install
```

**Issue 2: Vite scanning backend folder**
```bash
# Solution: Already fixed in vite.config.web.ts
# Check fs.deny includes '**/backend/**'
```

**Issue 3: Frontend not accessible**
```bash
# Check if vite running:
ps aux | grep vite

# Check logs:
tail -f /tmp/vite-web.log

# Restart:
pkill -f vite
./start_web.sh
```

**Issue 4: Backend not running**
```bash
# Check status:
sudo supervisorctl status backend

# Start if stopped:
sudo supervisorctl start backend

# Check logs:
tail -f /var/log/supervisor/backend.err.log
```

### **üéØ Development Workflow**

**Local Desktop Development:**
```bash
# Use Electron mode
yarn dev           # or npm run dev
```

**Container/Preview Development:**
```bash
# Use Web mode
./start_web.sh     # or npx vite --config vite.config.web.ts
```

### **üìä Port Reference**

| Service | Port | Config |
|---------|------|--------|
| Vite Dev Server | 3000 atau 5173 | vite.config.web.ts |
| FastAPI Backend | 8001 | backend/server.py |
| MongoDB | 27017 | supervisor |
| Electron (local) | 5173 | vite.config.ts |

### **‚úÖ Checklist Setup Container**

Sebelum mulai development di container:
```
‚ñ° Dependencies installed (yarn install)
‚ñ° vite.config.web.ts exists
‚ñ° start_web.sh exists & executable
‚ñ° .env file configured
‚ñ° Backend running (supervisorctl status)
‚ñ° MongoDB running
‚ñ° Port 3000 accessible
```

---

## üóÇÔ∏è **RULE #1: File Organization (WAJIB)**

### üìÅ Struktur Folder yang HARUS Diikuti:

```
chimera-ai/
‚îú‚îÄ‚îÄ README.md                    ‚Üê HANYA ini di root
‚îú‚îÄ‚îÄ docs/                        ‚Üê SEMUA dokumentasi
‚îÇ   ‚îú‚îÄ‚îÄ golden-rules.md         ‚Üê File ini (aturan project)
‚îÇ   ‚îú‚îÄ‚îÄ DEVELOPMENT.md          ‚Üê Development guide
‚îÇ   ‚îú‚îÄ‚îÄ tools.md                ‚Üê Python tools docs
‚îÇ   ‚îú‚îÄ‚îÄ games.md                ‚Üê Web games docs
‚îÇ   ‚îú‚îÄ‚îÄ test_result.md          ‚Üê Test results
‚îÇ   ‚îî‚îÄ‚îÄ phase/                  ‚Üê SEMUA phase documentation
‚îÇ       ‚îú‚îÄ‚îÄ phase_0.md          ‚Üê Phase 0 complete
‚îÇ       ‚îú‚îÄ‚îÄ phase_1.md          ‚Üê Phase 1 (upcoming)
‚îÇ       ‚îú‚îÄ‚îÄ phase_2.md          ‚Üê Phase 2 (upcoming)
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ tests/                       ‚Üê SEMUA test files
‚îÇ   ‚îú‚îÄ‚îÄ test_ipc.py             ‚Üê IPC tests
‚îÇ   ‚îú‚îÄ‚îÄ test_tools.py           ‚Üê Python tools tests
‚îÇ   ‚îú‚îÄ‚îÄ test_ui.py              ‚Üê UI tests
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ electron/                    ‚Üê Main process
‚îú‚îÄ‚îÄ src/                        ‚Üê Renderer process
‚îú‚îÄ‚îÄ tools/                      ‚Üê Python tools (NO .md here!)
‚îî‚îÄ‚îÄ games/                      ‚Üê Web games (NO .md here!)
```

---

## üìù **RULE #2: Documentation Files (.md)**

### ‚úÖ ATURAN KETAT:

1. **README.md**
   - ‚úÖ HANYA 1 file di root
   - ‚úÖ Berisi overview project
   - ‚ùå JANGAN pindah atau hapus

2. **Semua .md lainnya**
   - ‚úÖ HARUS di folder `docs/`
   - ‚úÖ Gunakan naming yang jelas: `feature-name.md` atau `feature_name.md`
   - ‚ùå JANGAN taruh di root
   - ‚ùå JANGAN taruh di folder fitur (tools/, games/, dll)

3. **Phase Documentation**
   - ‚úÖ HARUS di `docs/phase/phase_X.md`
   - ‚úÖ Format: `phase_0.md`, `phase_1.md`, `phase_2.md`, dst
   - ‚úÖ Dokumentasi setiap fase development (complete status)
   - ‚ùå JANGAN gunakan nama lain seperti:
     - ‚ùå `PHASE0_COMPLETE.md`
     - ‚ùå `phase-2-complete.md`
     - ‚ùå `Phase2Done.md`

### üìã Contoh Dokumentasi:
```bash
‚úÖ BENAR:
docs/DEVELOPMENT.md           # Dev guide
docs/phase/phase_0.md        # Phase 0 complete
docs/phase/phase_1.md        # Phase 1 progress
docs/tools.md                # Tools documentation
docs/games.md                # Games documentation

‚ùå SALAH:
DEVELOPMENT.md               # Di root ‚ùå
tools/README.md              # Di folder fitur ‚ùå
PHASE0_COMPLETE.md           # Nama tidak konsisten ‚ùå
docs/phase/phase-1.md        # Gunakan underscore ‚ùå
```

---

## üß™ **RULE #3: Test Files dan Testing Protocol**

### ‚úÖ ATURAN KETAT:

1. **Naming Convention**
   - ‚úÖ HARUS format: `test_*.py`
   - ‚úÖ Descriptive name: `test_ipc_communication.py`
   - ‚ùå JANGAN: `ipc_test.py`, `testing_ipc.py`

2. **Location**
   - ‚úÖ HARUS di folder `tests/`
   - ‚ùå JANGAN taruh di folder lain
   - ‚ùå JANGAN taruh di root

3. **Structure**
   ```python
   # tests/test_feature.py
   import pytest
   
   def test_feature_name():
       """Clear description of what this tests"""
       # Test implementation
       assert result == expected
   ```

### üö´ TESTING PROTOCOL (PENTING!)

**JANGAN auto-test di setiap percakapan!**

1. **Manual Testing First** (DEFAULT)
   - ‚úÖ Biarkan user yang test sendiri terlebih dahulu
   - ‚úÖ User akan report jika ada bug atau issue
   - ‚úÖ Fokus pada implementation dan bug fixing
   - ‚ùå JANGAN langsung run automated tests setelah setiap perubahan

2. **Automated Testing** (ONLY WHEN REQUESTED)
   - ‚úÖ HANYA jalankan automated tests jika user explicitly meminta
   - ‚úÖ Contoh request valid: "tolong test dengan testing agent", "run automated tests"
   - ‚ùå JANGAN auto-test tanpa diminta, ini membuang waktu dan resources

3. **Backend Testing Protocol** ‚ö†Ô∏è **SUPER CRITICAL**
   - ‚úÖ Untuk backend changes: User akan test manual via UI atau curl
   - ‚úÖ Backend restart otomatis via supervisor (hot reload aktif)
   - ‚ùå **DILARANG KERAS**: curl test setiap endpoint tanpa konfirmasi
   - ‚ùå **DILARANG KERAS**: run integration tests tanpa konfirmasi
   - ‚ùå **DILARANG KERAS**: cek backend logs tanpa konfirmasi user
   - ‚ùå **DILARANG KERAS**: tail logs backend untuk verification
   - üõë **WAJIB**: **MINTA KONFIRMASI USER** sebelum testing backend dengan cara apapun
   - üõë **WAJIB**: Setelah selesai implementation, **STOP dan MINTA USER untuk test**
   - ‚ÑπÔ∏è  User lebih paham workflow mereka sendiri

4. **Bug Fixing Protocol**
   - ‚úÖ User report bug ‚Üí Fix bug ‚Üí Biarkan user verify
   - ‚úÖ Fokus pada root cause analysis dan solution
   - ‚ùå JANGAN auto-test setelah bug fix
   - ‚ÑπÔ∏è  User akan confirm jika fix berhasil

5. **After Implementation Protocol** ‚≠ê **NEW**
   - ‚úÖ Selesai coding ‚Üí **STOP IMMEDIATELY**
   - ‚úÖ **JANGAN cek logs backend** tanpa diminta
   - ‚úÖ **JANGAN curl test** tanpa diminta
   - ‚úÖ **ASK USER**: "Implementasi sudah selesai, apakah Anda ingin saya bantu test backend?"
   - ‚úÖ Tunggu user response sebelum lakukan apapun
   - ‚ùå JANGAN asumsi user mau test otomatis

### üìã Contoh Test Files:
```bash
‚úÖ BENAR:
tests/test_ipc.py              # IPC communication tests
tests/test_python_tools.py     # Python tools execution
tests/test_ai_chat.py          # AI chat functionality
tests/test_ui_components.py    # UI component tests

‚ùå SALAH:
test_ipc.py                    # Di root ‚ùå
electron/test_main.py          # Di folder fitur ‚ùå
tests/ipc_tests.py             # Format nama salah ‚ùå
```

### üí° Why This Rule?

- **Efficiency**: User testing lebih cepat untuk simple changes
- **Context**: User tahu better apa yang perlu di-test
- **Resources**: Automated tests consume CPU/memory
- **Workflow**: User punya workflow testing sendiri yang lebih efficient

---

## üèóÔ∏è **RULE #4: Adding New Features**

### Workflow WAJIB:

1. **Planning** ‚Üí Buat `docs/phase/phase_X.md`
2. **Implementation** ‚Üí Code di folder yang sesuai
3. **Testing** ‚Üí Buat `tests/test_feature.py`
4. **Documentation** ‚Üí Update `docs/DEVELOPMENT.md`

### Checklist Setiap Feature Baru:
```
‚ñ° Dokumentasi di docs/
‚ñ° Test file di tests/
‚ñ° Update DEVELOPMENT.md
‚ñ° Update phase documentation
‚ñ° Code review passed
```

---

## üîß **RULE #5: Python Tools**

### Structure:
```
tools/
‚îú‚îÄ‚îÄ tool-name/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              ‚Üê Entry point
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt     ‚Üê Dependencies
‚îÇ   ‚îú‚îÄ‚îÄ config.json          ‚Üê Configuration
‚îÇ   ‚îî‚îÄ‚îÄ build/              ‚Üê PyInstaller output
```

### Rules:
- ‚úÖ Each tool in separate folder
- ‚úÖ Documentation in `docs/tools.md`
- ‚úÖ Tests in `tests/test_tool_name.py`
- ‚ùå NO README.md inside tool folder

---

## üéÆ **RULE #6: Web Games**

### Structure:
```
games/
‚îú‚îÄ‚îÄ game-name/
‚îÇ   ‚îú‚îÄ‚îÄ index.html           ‚Üê Entry point
‚îÇ   ‚îú‚îÄ‚îÄ game.js              ‚Üê Game logic
‚îÇ   ‚îú‚îÄ‚îÄ style.css            ‚Üê Styles
‚îÇ   ‚îî‚îÄ‚îÄ assets/             ‚Üê Images, sounds
```

### Rules:
- ‚úÖ Each game in separate folder
- ‚úÖ Documentation in `docs/games.md`
- ‚ùå NO README.md inside game folder

---

## üìä **RULE #7: Phase Development**

### Phase Documentation Template:

**File**: `docs/phase/phase_X.md`

```markdown
# Phase X: [Phase Name]

## Status: [In Progress / Complete / Planned]

## Goals
- [ ] Goal 1
- [ ] Goal 2

## Implementation
- Feature 1 implementation details
- Feature 2 implementation details

## Testing
- Test coverage: X%
- Test files:
  - tests/test_feature1.py
  - tests/test_feature2.py

## Documentation
- Updated files:
  - docs/DEVELOPMENT.md
  - docs/feature.md

## Next Steps
- [ ] Next item 1
- [ ] Next item 2
```

### Phase Numbering:
- ‚úÖ `phase_0.md` - Foundation
- ‚úÖ `phase_1.md` - UI Enhancement
- ‚úÖ `phase_2.md` - Python Tools
- ‚úÖ `phase_3.md` - AI Chat
- etc.

---

## üö´ **RULE #8: DILARANG KERAS**

### ‚ùå JANGAN PERNAH:

1. **File Organization**
   - ‚ùå Taruh .md di root (kecuali README.md)
   - ‚ùå Taruh test_*.py di luar folder tests/
   - ‚ùå Buat dokumentasi di folder fitur

2. **Naming**
   - ‚ùå Gunakan spasi di nama file
   - ‚ùå Gunakan CamelCase untuk .md files
   - ‚ùå Format phase selain `phase_X.md`

3. **Code**
   - ‚ùå Hardcode URLs atau API keys
   - ‚ùå Commit sensitive data
   - ‚ùå Skip testing untuk feature baru
   - ‚ùå **Hardcode absolute paths** (use relative paths!)

4. **Paths (CRITICAL)**
   - ‚ùå **Hardcode /app/ paths** (Docker-only, not portable!)
   - ‚ùå **Hardcode user-specific paths** (/home/user/, C:\Users\...)
   - ‚ùå **OS-specific path separators** (use path.join() atau pathlib)
   - ‚úÖ **Use relative paths** (./backend/, ../tools/)
   - ‚úÖ **Use runtime paths** (__dirname, process.cwd(), Path(__file__))

5. **Documentation**
   - ‚ùå Dokumentasi tidak sinkron dengan kode
   - ‚ùå Missing docstrings di functions
   - ‚ùå Incomplete phase documentation
   - ‚ùå **Hardcode paths in examples** (use relative paths in docs!)

---

## ‚úÖ **RULE #9: Before Every Commit**

### Checklist WAJIB:

```bash
‚ñ° All .md files in docs/ (except README.md)
‚ñ° All test_*.py files in tests/
‚ñ° Phase docs in docs/phase/phase_X.md
‚ñ° No hardcoded secrets
‚ñ° No hardcoded absolute paths (/app/, /home/, C:\, etc)
‚ñ° Paths are portable (relative or runtime-based)
‚ñ° Tests passing
‚ñ° Documentation updated
‚ñ° golden-rules.md followed
```

### Verification Commands:
```bash
# Check documentation
find . -name "*.md" -not -path "./node_modules/*" -not -path "./docs/*" -not -name "README.md"
# Should return NOTHING (empty)

# Check tests
find . -name "test_*.py" -not -path "./tests/*" -not -path "./node_modules/*"
# Should return NOTHING (empty)

# Check phase docs
ls docs/phase/
# Should list: phase_0.md, phase_1.md, phase_2.md, etc.

# Check for hardcoded paths (Python)
grep -r "/app/" --include="*.py" backend/ src/ electron/ 2>/dev/null || echo "‚úÖ No /app/ hardcoded paths"

# Check for hardcoded paths (JavaScript/TypeScript)
grep -r '"/app/' --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx" src/ electron/ 2>/dev/null || echo "‚úÖ No /app/ hardcoded paths"

# Check for hardcoded paths in docs
grep -r "/app/" --include="*.md" docs/ 2>/dev/null | grep -v "Example:" || echo "‚úÖ No /app/ in docs"
```

---

## üéØ **RULE #10: Quick Reference**

### Project Type: Electron Desktop Application

```
ChimeraAI Architecture:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Electron Desktop App (Cross-platform)  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Main Process (Node.js)                  ‚îÇ
‚îÇ  - electron/main.ts                     ‚îÇ
‚îÇ  - IPC handlers                         ‚îÇ
‚îÇ  - Window management                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Renderer Process (Browser)              ‚îÇ
‚îÇ  - React + TypeScript                   ‚îÇ
‚îÇ  - src/ directory                       ‚îÇ
‚îÇ  - UI Components                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Backend API (Optional)                  ‚îÇ
‚îÇ  - FastAPI (Python)                     ‚îÇ
‚îÇ  - backend/server.py                    ‚îÇ
‚îÇ  - SQLite database                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### File Location Quick Guide:

| File Type | Location | Example | Path Type |
|-----------|----------|---------|-----------|
| Project overview | `/README.md` | README.md | Root only |
| Documentation | `/docs/` | docs/DEVELOPMENT.md | Relative |
| Phase docs | `/docs/phase/` | docs/phase/phase_0.md | Relative |
| Python tests | `/tests/` | tests/test_ipc.py | Relative |
| Backend API | `/backend/` | backend/server.py | Relative |
| React components | `/src/components/` | src/components/Header.tsx | Relative |
| Electron main | `/electron/` | electron/main.ts | Relative |
| Python tools (future) | `/backend/tools/` | backend/tools/formatter/ | Relative |
| Web games (future) | `/games/` | games/tetris/index.html | Relative |

---

## üí° **Why These Rules?**

1. **Consistency** - Semua developer tahu dimana menemukan sesuatu
2. **Maintainability** - Project mudah di-maintain dan di-scale
3. **Professionalism** - Project terlihat professional dan organized
4. **Collaboration** - Tim bisa kolaborasi tanpa konflik
5. **Automation** - CI/CD bisa otomatis karena struktur konsisten
6. **Portability** - Code bisa running di Docker, Windows, macOS, Linux tanpa modifikasi
7. **Universal Development** - Developer bisa work di environment apapun
8. **Electron Best Practices** - Follow standard Electron app architecture

---

## üÜò **Need Help?**

- üìñ Read: `docs/DEVELOPMENT.md` untuk development guide
- üîç Check: `docs/phase/phase_X.md` untuk phase-specific info
- üß™ See: `tests/` untuk testing examples
- üìù Update: File ini jika ada aturan baru
- üöÄ **NEW:** `docs/phase/PROGRESS.md` - Journey tracker untuk project continuity

**For AI Agents (E1/E1.1):**
- Always read `docs/phase/PROGRESS.md` first in new conversations
- Check "Where We Are Now" to understand current phase
- Follow "Quick Reference" for essential files
- Update PROGRESS.md after completing each phase

---

## üîÑ **Version History**

- **v1.0** (Phase 0) - Initial golden rules established
  - File organization rules
  - Testing conventions
  - Documentation structure
  - Phase management

- **v2.0** (Phase 2) - Universal & Portable Development
  - ‚úÖ **RULE #0 added**: Project context (Electron app)
  - ‚úÖ **Path portability rules**: No hardcoded absolute paths
  - ‚úÖ Environment-agnostic development (Docker/Local/Multi-OS)
  - ‚úÖ Updated phase docs naming (phase_2.md format)
  - ‚úÖ Moved PHASE2_COMPLETE.md ‚Üí docs/phase/phase_2.md
  - ‚úÖ Moved LAUNCHER_QUICKSTART.md ‚Üí docs/quick-start.md
  - ‚úÖ Added path verification commands

- **v2.1** (Chat UI Enhancement) - Container & Web Preview Setup
  - ‚úÖ **RULE #0.5 added**: Container & web preview environment
  - ‚úÖ **Vite web config**: vite.config.web.ts untuk container mode
  - ‚úÖ **Startup script**: start_web.sh untuk quick start
  - ‚úÖ **Port configuration**: Frontend 3000, Backend 8001
  - ‚úÖ **Environment variables**: .env setup untuk web mode
  - ‚úÖ **Troubleshooting guide**: Common issues & solutions
  - ‚úÖ **Development workflow**: Local vs Container development
  - ‚úÖ Enhanced upload preview dengan bingkai khusus
  - ‚úÖ Fixed welcome screen hiding behavior

---

**‚ö†Ô∏è PENTING: Aturan ini WAJIB diikuti oleh SEMUA developer tanpa exception!**

**‚úÖ Jika ragu, tanya dulu sebelum commit!**

---

**Last Updated**: Chat UI Enhancement (Upload Preview & Container Setup)  
**Maintained By**: ChimeraAI Team  
**Status**: ‚úÖ Active & Enforced
    A
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      